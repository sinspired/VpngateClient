#!/VpngateClient.py
# 自定义翻译字典

translations = {
    "en": {
        # info logger information
        "connected": "connected",
        "download": "download",
        "up": "up",
        "down": "down",
        "privileges_check": "\033[31mThis script requires root privileges. Please run as root.\033[0m",
        "proxy_running": "A proxy server running at port \033[90;4m%s\033[0m, use Proxy to download",
        "vpn_start_running": "\033[2J\033[H\033[32m[VPNGATE-CLIENT], Start running...\033[0m",
        "vpnlist_expired": "\033[33mVPN servers list expired,download now!\033[0m",
        "download_from_main_url": "Downloading VPN list from \033[90;4m%s\033[0m",
        "vpnlist_download_saved_to_file": "VPN list downloaded and saved to \033[90;4m%s\033[0m",
        "failed_to_download_from_main_url": "\033[31mMain URL is unavailable, switch to backup URL!\033[0m",
        "proxy_check_failed": "Proxy check failed for \033[4m%s\033[0m",
        "available_GitHub_proxy": "\033[32mFound available GitHub proxy: \033[4m%s\033[0m",
        "fallback_to_original_url": "No available proxy found, using original URL: \033[90;4m%s\033[0m",
        "attempt_download_from_backup_url": "Attempting to download from backup URL: \033[90;4m%s\033[0m",
        "failed_to_download_from_backup_url": "Failed to download from backup URL too: \033[90;4m%s\033[0m",
        "file_path_not_found": "File path not found: \033[90;4m%s\033[0m",
        "get_vpnlist_with_backup_proxy": "Get VPN list with backup proxy: \033[90;4m%s\033[0m",
        "loading_vpn_list": "Loading VPN list...",
        "qualified": "Qualified",
        "main_list": "Main",
        "overall": "All",
        "load_vpn_servers_list": "Loading \033[90;4m%s\033[0m total \033[32m%i\033[0m servers",
        "qualified_vpn_csv": "Qualified list",
        "main_vpn_csv": "Main list",
        "found_vpn_servers": "From \033[90;4m%s\033[0m Loaded \033[32m%i\033[0m",
        "probing_vpns_concurrently": "Probing \033[90;4m%s\033[0m VPNs concurrently (workers=%s)...",
        "default_filter": "No geographic filters applied. Excluding \033[90m%s\033[0m VPNs from China (CN), Use \033[90m-c CN\033[0m to chose China servers.",
        "filtering_servers": "Filtering out unresponsive VPN servers",
        "found_responding_vpns": "Found \033[32m%i\033[0m responding VPNs overall",
        "Loaded_and_filtered_vpn_lists": "Loaded and filtered: \033[32m%i\033[0m responding VPNs overall. \033[90m%i\033[0m qualified VPNs, \033[90m%i\033[0m main list VPNs.",
        "no_vpns_after_filter": "No available VPNs after filtering. Exiting.",
        "vpn_init_success": "VPN initialized successfully! %s (%s)\033[0m \033[90m| %s:%s | %s | time: %s s\033[0m",
        "setup_iptables_rules": "Setting iptables rules to block non-VPN traffic",
        "clear_ptables_rules": "Clearing iptables rules",
        "bad_download_speed": "\033[33mBad download speed,attempting next server...\033[0m",
        "error_download_speed": "\033[33mdownload speed test failed,attempting next server...\033[0m",
        "next_vpn": "Next VPN...",
        "performing_speedtest": "\033[90mPerforming connection speed test. Press CTRL+C to stop it.\033[0m",
        "speedtest_canceled": "Speedtest Canceled!",
        "use_or_change": "Would you like to use this VPN ? (No = \033[1mCTRL+C\033[0m, Yes = Any Key)",
        "User interrupted prompt": "Switch to next vpn server",
        "setup_finished": "\033[32mSetup finished!\033[0m \033[90m(Press CTRL+C to stop the VPN)\033[0m",
        "connection_disconnected": "\033[33m\nVPN monitor found connection disconnected, Attempting to connect next server!\033[0m",
        "connection_closed": "\033[90mip %s port %s country %s,connection closed!\033[0m",
        "connecting_to_vpn": "Connecting to VPN",
        "Waiting for VPN initialization...": "Waiting for VPN initialization...",
        "writing_config": "Writing config to %s",
        "executing_cmd": "Executing %s",
        "vpn_init_failed": "VPN initialization failed.",
        "vpn_init_timeout": "VPN Initialization timed out.",
        "received_keyboard_interrupt": "\033[31mReceived keyboard interrupt.\033[0m",
        "terminating_vpn": "Terminating VPN connection",
        "vpn_terminated": "VPN connection Terminated!",
        "termination_timeout": "Termination timed out. Killing the process.",
        "vpn_unkillable": "The VPN process can't be killed!",
        "checking_if_qualified": "Connection stable for %s minutes. Checking if qualified.",
        "VPN Connected stable in n minutes, save VPN config in CSV file": "\033[32mVPN Connected stable in %i minutes, save VPN config in CSV file: %s\033[0m",
        "Qualified config file already exists. Skipping save.": "Qualified config file already exists: %s. Skipping save.",
        "(No status change for %s seconds)": "(No status change for %s seconds)",
        "delete_tmp_dir": "The temporary folder has been deleted",
        "delete_tmp_dir_failed": "Temporary folder deletion failed",
        "exiting": "\033[31mExiting...\033[0m",
        # debug输出
        "probing_vpn": "Probing VPN endpoint",
        "cant_probe_udp": "Can't probe UDP servers, set lateny as %s ms, to sort it first",
        "vpn_not_responding": "VPN endpoint did not respond to connection",
        "connection_failed": "Connection failed",
        "vpn_listening": "VPN endpoint is listening",
        # warning
        "Speedtest failed or returned error. Monitoring connection before prompting.": "Speedtest failed or returned error. Monitoring connection before prompting.",
        # OpenVPN/环境相关
        "openvpn_not_installed": "\033[31mOpenVPN is not installed on this system or added in system PATH.\033[0m",
        "add_openvpn_path": "Added %s to PATH environment variable.",
        "env_path_updated": "Environment PATH updated in Registry.",
        "failed_update_registry": "Failed to update Registry: %s",
        "openvpn_not_found_standard": "\033[33mWarning: OpenVPN installation not found in standard paths.\033[0m",
        "colorama_not_found": "Warning: colorama module not found. ANSI colors may not work properly.",
        # help info
        "appDescription": "Client for vpngate.net VPNs",
        "positional_arguments": "positional arguments",
        "optional_arguments": "options",
        "h_help": "show this help message and exit",
        "h_arg_country": "A 2 char country code (e.g. CA for Canada) from which to look for VPNs. If specified multiple times, VPNs from all the countries will be selected.",
        "h_arg_eu": "Adds European countries to the list of considerable countries.",
        "h_arg_probes": "Number of concurrent connection probes to send.",
        "h_arg_iptables": "Setting iptables rules to block non-VPN traffic",
        "h_arg_probe_timeout": "When probing, how long to wait for connection until marking the VPN as unavailable (seconds).",
        "h_arg_url": "URL of the VPN list (csv).",
        "h_arg_us": "Adds United States to the list of possible countries. Shorthand or --country US.",
        "h_arg_verbose": "More verbose output.",
        "h_arg_vpn_timeout": "Time to wait for a VPN to be established before giving up (seconds).",
        "h_arg_vpn_timeout_poll_interval": "Time between two checks for a potential timeout (seconds).",
        "h_arg_ovpnfile": "Connects to the OpenVPN VPN whose configuration is in the provided .ovpn file.",
        "h_arg_expired_time": "Time to wait for a ServersList to be expired (hour).",
        "h_arg_min_speed": "Minimum download speed (MB/s).",
        "h_arg_qualified_time": "After a stable connection for a period of time, save the server information to the favorite configuration for the next priority load (minutes)",
        "h_arg_sort_latency": "Enable latency sorting, use \033[90m--no-sort-latency\033[0m to disable latency sorting",
        "h_arg_no_sort_latency": "Disable latency sorting",
        "h_arg_udp_latency": "Set default latency(ms) for UDP protocol VPNs (for sorting).",
        # 新增日志相关翻译
        "Missing OpenVPN config data.": "Missing OpenVPN config data.",
        "Failed to decode Base64 config: %s": "Failed to decode Base64 config: %s",
        "Invalid Base64 config: %s": "Invalid Base64 config: %s",
        "Could not determine IP, Port, or Protocol from config.": "Could not determine IP, Port, or Protocol from config.",
        "New VPN: ip=%s, proto=%s port=%s country=%s (%s)": "New VPN: ip=%s, proto=%s port=%s country=%s (%s)",
        "Cannot probe VPN without IP and Port.": "Cannot probe VPN without IP and Port.",
        "Failed to write config file %s: %s": "Failed to write config file %s: %s",
        "VPN process did not initialize correctly.": "VPN process did not initialize correctly.",
        "Failed to set up firewall rules. Terminating connection.": "Failed to set up firewall rules. Terminating connection.",
        "during connection setup.": "during connection setup.",
        "An unexpected error occurred during connect: %s": "An unexpected error occurred during connect: %s",
        "Removed temporary file: %s": "Removed temporary file: %s",
        "Could not remove temporary file %s: %s": "Could not remove temporary file %s: %s",
        "Error removing temporary file %s: %s": "Error removing temporary file %s: %s",
        "Status file not found: %s": "Status file not found: %s",
        "Status file is empty: %s": "Status file is empty: %s",
        "Could not read status file %s: %s": "Could not read status file %s: %s",
        "Unexpected error reading stats from %s: %s": "Unexpected error reading stats from %s: %s",
        "No change detected in stats. Counter: %s": "No change detected in stats. Counter: %s",
        "将要保存优质配置到: %s": "Will save qualified config to: %s",
        "VPN连接稳定，保存配置到文件\n %s。": "VPN connection stable, saving config to file\n %s.",
        "Failed to save qualified VPN info: %s": "Failed to save qualified VPN info: %s",
        "Unexpected error saving qualified VPN: %s": "Unexpected error saving qualified VPN: %s",
        "Already saved as qualified during this run.": "Already saved as qualified during this run.",
        "VPN process already terminated or not started.": "VPN process already terminated or not started.",
        "Sent SIGTERM to PID %s.": "Sent SIGTERM to PID %s.",
        "Process with PID %s not found for termination (already gone?).": "Process with PID %s not found for termination (already gone?).",
        "Error trying to send SIGTERM to PID %s: %s": "Error trying to send SIGTERM to PID %s: %s",
        "Sent SIGKILL to PID %s.": "Sent SIGKILL to PID %s.",
        "Called proc.kill() for PID %s.": "Called proc.kill() for PID %s.",
        "VPN process force-killed (PID: %s). Exit code: %s": "VPN process force-killed (PID: %s). Exit code: %s",
        "Error waiting after SIGKILL for process %s: %s": "Error waiting after SIGKILL for process %s: %s",
        "Process with PID %s not found for SIGKILL (already gone?).": "Process with PID %s not found for SIGKILL (already gone?).",
        "Error trying to send SIGKILL to PID %s: %s": "Error trying to send SIGKILL to PID %s: %s",
        "Failed to force kill process %s. Manual intervention may be required.": "Failed to force kill process %s. Manual intervention may be required.",
        "Status file will be: %s": "Status file will be: %s",
        " - Process exited with code %s": " - Process exited with code %s",
        "OpenVPN stderr:\n%s": "OpenVPN stderr:\n%s",
        "OpenVPN stdout:\n%s": "OpenVPN stdout:\n%s",
        "IOError reading OpenVPN stdout, process might have issues.": "IOError reading OpenVPN stdout, process might have issues.",
        "Unexpected error waiting for VPN ready: %s": "Unexpected error waiting for VPN ready: %s",
        "No VPNs to probe.": "No VPNs to probe.",
        "Availability probe failed for a VPN: %s": "Availability probe failed for a VPN: %s",
        "Qualified VPNs after geo filter: %s (from %s)": "Qualified VPNs after geo filter: %s (from %s)",
        "Main list VPNs after geo filter: %s (from %s)": "Main list VPNs after geo filter: %s (from %s)",
        "Applying geographic filters...": "Applying geographic filters...",
        "Including VPNs in Europe": "Including VPNs in Europe",
        "Including VPNs in USA": "Including VPNs in USA",
        "Including VPNs in %s": "Including VPNs in %s",
        "Found %s, but no VPNs were loaded from it.": "Found %s, but no VPNs were loaded from it.",
        "Failed to read or process %s: %s": "Failed to read or process %s: %s",
        "Error parsing row from qualified_vpns.csv: %s - %s": "Error parsing row from qualified_vpns.csv: %s - %s",
        "Failed to read or process main VPN list %s: %s": "Failed to read or process main VPN list %s: %s",
        "system proxy error: %s": "system proxy error: %s",
        "code: %s": "code: %s",
        "I/O Error during monitoring: %s": "I/O Error during monitoring: %s",
        "An unexpected error occurred during vpn_monitor: %s": "An unexpected error occurred during vpn_monitor: %s",
        "Qualified VPNs after responsiveness filter: %s": "Qualified VPNs after responsiveness filter: %s",
        "Main list VPNs after responsiveness filter: %s": "Main list VPNs after responsiveness filter: %s",
        "Connection attempt declined or failed for: %s": "Connection attempt declined or failed for: %s",
        "Attempting connections from %s list (%s VPNs)...": "Attempting connections from %s list (%s VPNs)...",
        "No VPNs to try in %s list.": "No VPNs to try in %s list.",
        "Connection established and confirmed with: %s": "Connection established and confirmed with: %s",
        "Connection process interrupted by user.": "Connection process interrupted by user.",
        "Skipping qualified VPN list as it is empty.": "Skipping qualified VPN list as it is empty.",
        "Skipping main VPN list as it is empty.": "Skipping main VPN list as it is empty.",
        "Connection already established from the qualified list. Skipping main list.": "Connection already established from the qualified list. Skipping main list.",
        "Failed to establish a connection with any VPN from any list.": "Failed to establish a connection with any VPN from any list.",
        " during VPN wait.": " during VPN wait.",
    },
    "zh": {
        # info
        "connected": "已连接",
        "download": "下载",
        "up": "上行",
        "down": "下行",
        "privileges_check": "\033[31m需要管理员权限,请使用 sudo 以 root 运行\033[0m",
        "proxy_running": "系统代理在端口 \033[90;4m%s\033[0m 开放, 使用系统代理下载",
        "vpn_start_running": "\033[2J\033[H\033[32m[VPNGATE-CLIENT] VPNGATE 客户端, 开始运行...\033[0m",
        "vpnlist_expired": "\033[33mVPN 服务器列表已过期，重新下载!\033[0m",
        "download_from_main_url": "从 \033[90;4m%s\033[0m 下载 VPN 列表",
        "vpnlist_download_saved_to_file": "VPN 列表已下载并保存到 \033[90;4m%s\033[0m",
        "failed_to_download_from_main_url": "\033[31m主下载网址不可用，切换备用网址！\033[0m",
        "proxy_check_failed": "GitHub 代理地址 \033[4m%s\033[0m 暂不可用！",
        "available_GitHub_proxy": "\033[32m发现可用GitHub 代理: \033[4m%s\033[0m",
        "fallback_to_original_url": "没有可用GitHub代理，使用原始网址: \033[90;4m%s\033[0m",
        "attempt_download_from_backup_url": "尝试从备用网址下载: \033[90;4m%s\033[0m",
        "failed_to_download_from_backup_url": "从备用地址 \033[90;4m%s\033[0m 也下载失败了！",
        "file_path_not_found": "文件路径不存在: \033[90;4m%s\033[0m",
        "get_vpnlist_with_backup_proxy": "使用备用代理获取 VPN 服务器列表: \033[90;4m%s\033[0m",
        "loading_vpn_list": "加载VPN服务器列表...",
        "qualified": "收藏",
        "main_list": "主要",
        "overall": "全部",
        "load_vpn_servers_list": "加载 \033[90;4m%s\033[0m 总计 \033[32m%2i\033[0m 个节点",
        "qualified_vpn_csv": "收藏",
        "main_vpn_csv": "主要",
        "found_vpn_servers": "加载 \033[90;4m%s\033[0m 数量: \033[32m%i\033[0m",
        "probing_vpns_concurrently": "并发检测 \033[90;4m%s\033[0m 个节点...(并发数=\033[90m%s\033[0m)",
        "default_filter": "默认排除 \033[90m%s\033[0m 个 CN 节点, 使用 \033[90m-c CN\033[0m 选择中国节点",
        "filtering_servers": "过滤无响应服务器",
        "found_responding_vpns": "总计发现 \033[32m%i\033[0m 个可用 VPN 服务器",
        "Loaded_and_filtered_vpn_lists": "总计发现 \033[32m%i\033[0m 个可用 VPN 节点, 收藏: \033[32m%i\033[0m , 主列表: \033[32m%i\033[0m",
        "no_vpns_after_filter": "加载和筛选后没有可用的VPN，程序即将退出。",
        "vpn_init_success": "\033[32m连接成功! %s (%s)\033[0m \033[90m| %s:%s | %s | 用时: %s 秒\033[0m",
        "setup_iptables_rules": "设置 iptables 规则以阻止非 VPN 流量",
        "clear_ptables_rules": "清除 iptables 规则",
        "performing_speedtest": "\033[90m运行 VPN 连接速度测试，按 CTRL+C 终止测速.\033[0m",
        "speedtest_canceled": "下载速度测试取消!",
        "bad_download_speed": "下载速度不佳，尝试下一个服务器...",
        "error_download_speed": "\033[31mvpn 检测出错，尝试下一个服务器...\033[0m",
        "next_vpn": "- 下一个VPN...",
        "use_or_change": "是否使用此 VPN ? ( 按任意键确认！ 按 \033[1mCTRL+C\033[0m 切换VPN！)",
        "User interrupted prompt": "切换下一个 VPN 服务器",
        "setup_finished": "\033[32m设置完成!\033[0m \033[90m(按 CTRL+C 切换下一个 VPN 或结束连接并退出)\033[0m",
        "connection_disconnected": "\033[33m监测到VPN连接已断开，尝试下一个！\033[0m",
        "connection_closed": "IP %s 端口 %s 国家 %s，连接已关闭！",
        "connecting_to_vpn": "正在连接VPN",
        "Waiting for VPN initialization...": "等待 VPN 初始化...",
        "writing_config": "正在将配置写入 %s",
        "executing_cmd": "执行命令 %s",
        "vpn_init_failed": "VPN 初始化失败。",
        "vpn_init_timeout": "VPN 初始化超时。",
        "received_keyboard_interrupt": "\033[31m收到键盘中断。\033[0m",
        "terminating_vpn": "正在终止 VPN 连接",
        "vpn_terminated": "VPN 连接已终止！",
        "vpn_unkillable": "无法终止VPN进程！",
        "checking_if_qualified": "稳定连接 %d 分钟, 检测是否已收藏",
        "Qualified config file already exists. Skipping save.": "已收藏于：\033[90;4m%s\033[0m",
        "VPN Connected stable in n minutes, save VPN config in CSV file": "\033[32mVPN 稳定连接 %s 分钟，保存配置: \033[90;4m%s\033[0m",
        "(No status change for %s seconds)": "\033[90m(\033[0m\033[33m%s\033[0m \033[90m秒内未检测到数据读写)\033[0m",
        "delete_tmp_dir": "临时文件夹已删除",
        "delete_tmp_dir_failed": "临时文件夹删除失败",
        "exiting": "\033[31m退出程序...\033[0m",
        # debug
        "probing_vpn": "正在探测 VPN 端点",
        "cant_probe_udp": "无法探测 UDP 服务器, 指定延迟为 %s ms, 以获取靠前排序",
        "vpn_not_responding": "VPN 端点未响应连接",
        "connection_failed": "连接失败",
        "vpn_listening": "VPN 正在监听，延迟 %s",
        # warning
        "Speedtest failed or returned error. Monitoring connection before prompting.": "速度检测出错,继续检查状态文件二次确认",
        # OpenVPN/环境相关
        "openvpn_not_installed": "\033[31m未检测到 OpenVPN，请先安装 OpenVPN 或将其添加到系统 PATH。\033[0m",
        "add_openvpn_path": "已将 %s 添加到 PATH 环境变量。",
        "env_path_updated": "已在注册表中更新环境变量 PATH。",
        "failed_update_registry": "注册表更新失败: %s",
        "openvpn_not_found_standard": "\033[33m警告: 未在标准路径下发现 OpenVPN 安装。\033[0m",
        "colorama_not_found": "警告: 未安装 colorama 模块，ANSI 颜色可能无法正常显示。",
        # 帮助信息
        "appDescription": "vpngate.net 的VPN客户端",
        # 'appUsage': '用法: vpngateclientcn.py [选项] [ovpnfile]',
        "positional_arguments": "位置参数",
        "optional_arguments": "可选参数",
        "h_help": "显示此帮助信息并退出",
        "h_arg_country": "指定一个两位字母的国家代码（例如 CA 代表加拿大），用于选择 VPN。可多次指定多个国家的 VPN。",
        "h_arg_eu": "将欧洲国家添加到可考虑的国家列表中。",
        "h_arg_probes": "发送的并发连接探测数量。",
        "h_arg_iptables": "设置 iptables 规则以阻止非 VPN 流量",
        "h_arg_probe_timeout": "探测时，等待连接的时间，超时后标记该 VPN 为不可用（以秒为单位）。",
        "h_arg_url": "VPN 列表的 URL（csv）。",
        "h_arg_us": "将美国添加到可能的国家列表中. 等价于 --country US。",
        "h_arg_verbose": "输出更多详细信息。",
        "h_arg_vpn_timeout": "等待 VPN 建立连接的时间，超时后放弃（以秒为单位）。",
        "h_arg_vpn_timeout_poll_interval": "两次检查潜在超时的时间间隔（以秒为单位）。",
        "h_arg_ovpnfile": "连接到 OpenVPN 的 VPN，其配置文件为提供的 .ovpn 文件。",
        "h_arg_expired_time": "等待服务器列表过期的时间, 单位: 小时。",
        "h_arg_min_speed": "最低下载速度, 单位: MB/s。",
        "h_arg_qualified_time": "稳定连接一段时间后,保存服务器信息到收藏配置以供下次优先加载,单位: 分钟",
        "h_arg_sort_latency": "开启延迟排序, 使用 \033[90m--no-sort-latency\033[0m 关闭延迟排序",
        "h_arg_no_sort_latency": "关闭延迟排序",
        "h_arg_udp_latency": "为 UDP 协议的 VPN 设置默认延迟（毫秒），用于排序",
        # 新增日志相关翻译
        "Missing OpenVPN config data.": "缺少 OpenVPN 配置数据。",
        "Failed to decode Base64 config: %s": "Base64 配置解码失败: %s",
        "Invalid Base64 config: %s": "无效的 Base64 配置: %s",
        "Could not determine IP, Port, or Protocol from config.": "无法从配置中确定 IP、端口或协议。",
        "New VPN: ip=%s, proto=%s port=%s country=%s (%s)": "新 VPN: ip=%s, 协议=%s 端口=%s 国家=%s (%s)",
        "Cannot probe VPN without IP and Port.": "没有 IP 和端口无法探测 VPN。",
        "Failed to write config file %s: %s": "写入配置文件 %s 失败: %s",
        "VPN process did not initialize correctly.": "VPN 进程未正确初始化。",
        "Failed to set up firewall rules. Terminating connection.": "设置防火墙规则失败，终止连接。",
        "during connection setup.": "连接设置期间。",
        "An unexpected error occurred during connect: %s": "连接过程中发生异常: %s",
        "Removed temporary file: %s": "已删除临时文件: %s",
        "Could not remove temporary file %s: %s": "无法删除临时文件 %s: %s",
        "Error removing temporary file %s: %s": "删除临时文件 %s 时出错: %s",
        "Status file not found: %s": "状态文件未找到: %s",
        "Status file is empty: %s": "状态文件为空: %s",
        "Could not read status file %s: %s": "无法读取状态文件 %s: %s",
        "Unexpected error reading stats from %s: %s": "读取状态文件 %s 时发生异常: %s",
        "No change detected in stats. Counter: %s": "状态未变化，计数: %s",
        "将要保存优质配置到: %s": "将要保存优质配置到: %s",
        "VPN连接稳定，保存配置到文件\n %s。": "VPN 连接稳定，保存配置到文件\n %s。",
        "Failed to save qualified VPN info: %s": "保存优质 VPN 信息失败: %s",
        "Unexpected error saving qualified VPN: %s": "保存优质 VPN 时发生异常: %s",
        "Already saved as qualified during this run.": "本次运行已保存为优质。",
        "VPN process already terminated or not started.": "VPN 进程已终止或未启动。",
        "Sent SIGTERM to PID %s.": "已发送 SIGTERM 到 PID %s。",
        "Process with PID %s not found for termination (already gone?).": "PID %s 进程未找到，可能已结束。",
        "Error trying to send SIGTERM to PID %s: %s": "发送 SIGTERM 到 PID %s 时出错: %s",
        "termination_timeout": "终止超时，正在强制结束进程。",
        "Sent SIGKILL to PID %s.": "已发送 SIGKILL 到 PID %s。",
        "Called proc.kill() for PID %s.": "调用 proc.kill() 结束 PID %s。",
        "VPN process force-killed (PID: %s). Exit code: %s": "VPN 进程已强制终止 (PID: %s)，退出码: %s",
        "Error waiting after SIGKILL for process %s: %s": "SIGKILL 后等待进程 %s 时出错: %s",
        "Process with PID %s not found for SIGKILL (already gone?).": "PID %s 进程未找到，可能已结束。",
        "Error trying to send SIGKILL to PID %s: %s": "发送 SIGKILL 到 PID %s 时出错: %s",
        "Failed to force kill process %s. Manual intervention may be required.": "无法强制终止进程 %s，可能需要手动干预。",
        "Status file will be: %s": "状态文件路径: %s",
        " - Process exited with code %s": " - 进程退出码 %s",
        "OpenVPN stderr:\n%s": "OpenVPN 错误输出:\n%s",
        "OpenVPN stdout:\n%s": "OpenVPN 标准输出:\n%s",
        "IOError reading OpenVPN stdout, process might have issues.": "读取 OpenVPN 输出时发生 IO 错误，进程可能有问题。",
        "Unexpected error waiting for VPN ready: %s": "等待 VPN 就绪时发生异常: %s",
        "No VPNs to probe.": "没有可探测的 VPN。",
        "Availability probe failed for a VPN: %s": "VPN 可用性探测失败: %s",
        "Qualified VPNs after geo filter: %s (from %s)": "地理过滤后优质 VPN 数: %s (原有: %s)",
        "Main list VPNs after geo filter: %s (from %s)": "地理过滤后主列表 VPN 数: %s (原有: %s)",
        "Applying geographic filters...": "应用地理过滤...",
        "Including VPNs in Europe": "包含欧洲 VPN",
        "Including VPNs in USA": "包含美国 VPN",
        "Including VPNs in %s": "包含 %s 的 VPN",
        "Found %s, but no VPNs were loaded from it.": "找到 %s，但未加载任何 VPN。",
        "Failed to read or process %s: %s": "读取或处理 %s 失败: %s",
        "Error parsing row from qualified_vpns.csv: %s - %s": "解析 qualified_vpns.csv 行出错: %s - %s",
        "Failed to read or process main VPN list %s: %s": "读取或处理主 VPN 列表 %s 失败: %s",
        "system proxy error: %s": "系统代理错误: %s",
        "code: %s": "代码: %s",
        "I/O Error during monitoring: %s": "监控期间发生 IO 错误: %s",
        "An unexpected error occurred during vpn_monitor: %s": "vpn_monitor 期间发生异常: %s",
        "Qualified VPNs after responsiveness filter: %s": "延迟过滤后优质 VPN 数: %s",
        "Main list VPNs after responsiveness filter: %s": "延迟过滤后主列表 VPN 数: %s",
        "Connection attempt declined or failed for: %s": "连接尝试被拒绝或失败: %s",
        "Attempting connections from %s list (%s VPNs)...": "尝试从 %s 列表连接 (%s 个 VPN)...",
        "No VPNs to try in %s list.": "%s 列表中没有可用的 VPN。",
        "Connection established and confirmed with: %s": "已建立并确认连接: %s",
        "Connection process interrupted by user.": "连接过程被用户中断。",
        "Skipping qualified VPN list as it is empty.": "跳过空的收藏 VPN 列表。",
        "Skipping main VPN list as it is empty.": "跳过空的主 VPN 列表。",
        "Connection already established from the qualified list. Skipping main list.": "已从收藏列表建立连接，跳过主列表。",
        "Failed to establish a connection with any VPN from any list.": "所有列表均未能建立 VPN 连接。",
        " during VPN wait.": "（VPN 等待期间）",
    },
}


# 获取翻译文本的函数
def get_text(key, lang=None):
    import locale
    import warnings

    # 忽略 locale.getdefaultlocale() 的弃用警告
    warnings.filterwarnings(
        "ignore", category=DeprecationWarning, message=".*getdefaultlocale.*"
    )

    def get_system_language():
        try:
            return locale.getdefaultlocale()[0]
        except Exception:
            return "en_US"

    if lang is None:
        lang = get_system_language()[:2]
    return translations.get(lang, translations["en"]).get(key, translations["en"][key])
